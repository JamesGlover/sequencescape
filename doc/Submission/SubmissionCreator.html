<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Submission::SubmissionCreator
  
    &mdash; Documentation by YARD 0.9.5
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "Submission::SubmissionCreator";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (S)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../Submission.html" title="Submission (class)">Submission</a></span></span>
     &raquo; 
    <span class="title">SubmissionCreator</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <iframe id="search_frame" src="../class_list.html"></iframe>

      <div id="content"><h1>Class: Submission::SubmissionCreator
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName"><span class='object_link'><a href="PresenterSkeleton.html" title="Submission::PresenterSkeleton (class)">PresenterSkeleton</a></span></span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next"><span class='object_link'><a href="PresenterSkeleton.html" title="Submission::PresenterSkeleton (class)">PresenterSkeleton</a></span></li>
          
            <li class="next">Submission::SubmissionCreator</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>app/models/submission/submission_creator.rb</dd>
  </dl>
  
</div>


  <h2>Constant Summary</h2>
  <dl class="constants">
    
      <dt id="SubmissionsCreaterError-constant" class="">SubmissionsCreaterError =
        
      </dt>
      <dd><pre class="code"><span class='const'>Class</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='const'>StandardError</span><span class='rparen'>)</span></pre></dd>
    
      <dt id="IncorrectParamsException-constant" class="">IncorrectParamsException =
        
      </dt>
      <dd><pre class="code"><span class='const'>Class</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='const'>SubmissionsCreaterError</span><span class='rparen'>)</span></pre></dd>
    
      <dt id="InvalidInputException-constant" class="">InvalidInputException =
        
      </dt>
      <dd><pre class="code"><span class='const'>Class</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='const'>SubmissionsCreaterError</span><span class='rparen'>)</span></pre></dd>
    
  </dl>







  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#build_submission%21-instance_method" title="#build_submission! (instance method)">#<strong>build_submission!</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#cross_compatible%3F-instance_method" title="#cross_compatible? (instance method)">#<strong>cross_compatible?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#cross_project-instance_method" title="#cross_project (instance method)">#<strong>cross_project</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#cross_study-instance_method" title="#cross_study (instance method)">#<strong>cross_study</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_asset_group-instance_method" title="#find_asset_group (instance method)">#<strong>find_asset_group</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#order-instance_method" title="#order (instance method)">#<strong>order</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the either the first order associated with the submission or
creates a new blank order.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#order_assets-instance_method" title="#order_assets (instance method)">#<strong>order_assets</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#order_fields-instance_method" title="#order_fields (instance method)">#<strong>order_fields</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#order_params-instance_method" title="#order_params (instance method)">#<strong>order_params</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#orders-instance_method" title="#orders (instance method)">#<strong>orders</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Return the submission&#39;s orders or a blank array.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#per_order_settings-instance_method" title="#per_order_settings (instance method)">#<strong>per_order_settings</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#plate_purpose-instance_method" title="#plate_purpose (instance method)">#<strong>plate_purpose</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#product_lines-instance_method" title="#product_lines (instance method)">#<strong>product_lines</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#project-instance_method" title="#project (instance method)">#<strong>project</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#save-instance_method" title="#save (instance method)">#<strong>save</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Creates a new submission and adds an initial order on the submission using
the parameters.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#studies-instance_method" title="#studies (instance method)">#<strong>studies</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#study-instance_method" title="#study (instance method)">#<strong>study</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#submission-instance_method" title="#submission (instance method)">#<strong>submission</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#template-instance_method" title="#template (instance method)">#<strong>template</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the SubmissionTemplate (OrderTemplate) to be used for this
Submission.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#template_id-instance_method" title="#template_id (instance method)">#<strong>template_id</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#template_name-instance_method" title="#template_name (instance method)">#<strong>template_name</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#templates-instance_method" title="#templates (instance method)">#<strong>templates</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#url-instance_method" title="#url (instance method)">#<strong>url</strong>(view)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#user_valid_projects-instance_method" title="#user_valid_projects (instance method)">#<strong>user_valid_projects</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns an array of all the names of active projects associated with the
current user.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#wells_on_specified_plate_purpose_for-instance_method" title="#wells_on_specified_plate_purpose_for (instance method)">#<strong>wells_on_specified_plate_purpose_for</strong>(plate_purpose, samples)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>This is a legacy of the old controller…</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods inherited from <span class='object_link'><a href="PresenterSkeleton.html" title="Submission::PresenterSkeleton (class)">PresenterSkeleton</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="PresenterSkeleton.html#each_submission_warning-instance_method" title="Submission::PresenterSkeleton#each_submission_warning (method)">#each_submission_warning</a></span>, <span class='object_link'><a href="PresenterSkeleton.html#id-instance_method" title="Submission::PresenterSkeleton#id (method)">#id</a></span>, <span class='object_link'><a href="PresenterSkeleton.html#id%3D-instance_method" title="Submission::PresenterSkeleton#id= (method)">#id=</a></span>, <span class='object_link'><a href="PresenterSkeleton.html#initialize-instance_method" title="Submission::PresenterSkeleton#initialize (method)">#initialize</a></span>, <span class='object_link'><a href="PresenterSkeleton.html#lanes_of_sequencing-instance_method" title="Submission::PresenterSkeleton#lanes_of_sequencing (method)">#lanes_of_sequencing</a></span>, <span class='object_link'><a href="PresenterSkeleton.html#order_projects-instance_method" title="Submission::PresenterSkeleton#order_projects (method)">#order_projects</a></span>, <span class='object_link'><a href="PresenterSkeleton.html#order_studies-instance_method" title="Submission::PresenterSkeleton#order_studies (method)">#order_studies</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <p class="notice">This class inherits a constructor from <span class='object_link'><a href="PresenterSkeleton.html#initialize-instance_method" title="Submission::PresenterSkeleton#initialize (method)">Submission::PresenterSkeleton</a></span></p>
  
</div>
<div id="method_missing_details" class="method_details_list">
  <h2>Dynamic Method Handling</h2>
  <p class="notice super">
    This class handles dynamic methods through the <tt>method_missing</tt> method
    
      in the class <span class='object_link'>Submission::PresenterSkeleton</span>
    
  </p>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="build_submission!-instance_method">
  
    #<strong>build_submission!</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


33
34
35
36
37
38
39
40
41
42
43
44
45</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/submission/submission_creator.rb', line 33</span>

<span class='kw'>def</span> <span class='id identifier rubyid_build_submission!'>build_submission!</span>
  <span class='kw'>begin</span>
    <span class='id identifier rubyid_submission'>submission</span><span class='period'>.</span><span class='id identifier rubyid_built!'>built!</span>
  <span class='kw'>rescue</span> <span class='const'>AASM</span><span class='op'>::</span><span class='const'>InvalidTransition</span>
    <span class='id identifier rubyid_submission'>submission</span><span class='period'>.</span><span class='id identifier rubyid_errors'>errors</span><span class='period'>.</span><span class='id identifier rubyid_add'>add</span><span class='lparen'>(</span><span class='symbol'>:base</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Submissions can not be edited once they are submitted for building.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>rescue</span> <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>RecordInvalid</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_exception'>exception</span>
    <span class='id identifier rubyid_exception'>exception</span><span class='period'>.</span><span class='id identifier rubyid_record'>record</span><span class='period'>.</span><span class='id identifier rubyid_errors'>errors</span><span class='period'>.</span><span class='id identifier rubyid_full_messages'>full_messages</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_message'>message</span><span class='op'>|</span>
      <span class='id identifier rubyid_submission'>submission</span><span class='period'>.</span><span class='id identifier rubyid_errors'>errors</span><span class='period'>.</span><span class='id identifier rubyid_add'>add</span><span class='lparen'>(</span><span class='symbol'>:base</span><span class='comma'>,</span> <span class='id identifier rubyid_message'>message</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>rescue</span> <span class='const'>Submission</span><span class='op'>::</span><span class='const'>ProjectValidation</span><span class='op'>::</span><span class='const'>Error</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_exception'>exception</span>
    <span class='id identifier rubyid_submission'>submission</span><span class='period'>.</span><span class='id identifier rubyid_errors'>errors</span><span class='period'>.</span><span class='id identifier rubyid_add'>add</span><span class='lparen'>(</span><span class='symbol'>:base</span><span class='comma'>,</span> <span class='id identifier rubyid_exception'>exception</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="cross_compatible?-instance_method">
  
    #<strong>cross_compatible?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


64
65
66</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/submission/submission_creator.rb', line 64</span>

<span class='kw'>def</span> <span class='id identifier rubyid_cross_compatible?'>cross_compatible?</span>
  <span class='id identifier rubyid_order'>order</span><span class='period'>.</span><span class='id identifier rubyid_cross_compatible?'>cross_compatible?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="cross_project-instance_method">
  
    #<strong>cross_project</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


180
181
182</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/submission/submission_creator.rb', line 180</span>

<span class='kw'>def</span> <span class='id identifier rubyid_cross_project'>cross_project</span>
  <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="cross_study-instance_method">
  
    #<strong>cross_study</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


184
185
186</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/submission/submission_creator.rb', line 184</span>

<span class='kw'>def</span> <span class='id identifier rubyid_cross_study'>cross_study</span>
  <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_asset_group-instance_method">
  
    #<strong>find_asset_group</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


51
52
53</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/submission/submission_creator.rb', line 51</span>

<span class='kw'>def</span> <span class='id identifier rubyid_find_asset_group'>find_asset_group</span>
  <span class='const'>AssetGroup</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='id identifier rubyid_asset_group_id'>asset_group_id</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_asset_group_id'>asset_group_id</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="order-instance_method">
  
    #<strong>order</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the either the first order associated with the submission or
creates a new blank order.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


57
58
59
60
61
62</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/submission/submission_creator.rb', line 57</span>

<span class='kw'>def</span> <span class='id identifier rubyid_order'>order</span>
  <span class='kw'>return</span> <span class='ivar'>@order</span> <span class='kw'>if</span> <span class='ivar'>@order</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_submission'>submission</span><span class='period'>.</span><span class='id identifier rubyid_orders'>orders</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span> <span class='kw'>if</span> <span class='id identifier rubyid_submission'>submission</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>

  <span class='ivar'>@order</span> <span class='op'>=</span> <span class='id identifier rubyid_create_order'>create_order</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="order_assets-instance_method">
  
    #<strong>order_assets</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="#InvalidInputException-constant" title="Submission::SubmissionCreator::InvalidInputException (constant)">InvalidInputException</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/submission/submission_creator.rb', line 147</span>

<span class='kw'>def</span> <span class='id identifier rubyid_order_assets'>order_assets</span>
  <span class='id identifier rubyid_input_methods'>input_methods</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='symbol'>:asset_group_id</span><span class='comma'>,</span> <span class='symbol'>:sample_names_text</span><span class='comma'>,</span> <span class='symbol'>:barcodes_wells_text</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_input_method'>input_method</span><span class='op'>|</span> <span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_input_method'>input_method</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='rbrace'>}</span>

  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>InvalidInputException</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>No Samples found</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_input_methods'>input_methods</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>InvalidInputException</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Samples cannot be added from multiple sources at the same time.</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_input_methods'>input_methods</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>==</span> <span class='int'>1</span>

  <span class='kw'>return</span> <span class='kw'>case</span> <span class='id identifier rubyid_input_methods'>input_methods</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
    <span class='kw'>when</span> <span class='symbol'>:asset_group_id</span>    <span class='kw'>then</span> <span class='lbrace'>{</span> <span class='label'>asset_group:</span> <span class='id identifier rubyid_find_asset_group'>find_asset_group</span> <span class='rbrace'>}</span>
    <span class='kw'>when</span> <span class='symbol'>:sample_names_text</span> <span class='kw'>then</span>
      <span class='lbrace'>{</span>
        <span class='label'>assets:</span> <span class='id identifier rubyid_wells_on_specified_plate_purpose_for'>wells_on_specified_plate_purpose_for</span><span class='lparen'>(</span>
          <span class='id identifier rubyid_plate_purpose'>plate_purpose</span><span class='comma'>,</span>
          <span class='id identifier rubyid_find_samples_from_text'>find_samples_from_text</span><span class='lparen'>(</span><span class='id identifier rubyid_sample_names_text'>sample_names_text</span><span class='rparen'>)</span>
        <span class='rparen'>)</span>
      <span class='rbrace'>}</span>
    <span class='kw'>when</span> <span class='symbol'>:barcodes_wells_text</span> <span class='kw'>then</span>
      <span class='lbrace'>{</span>
        <span class='label'>assets:</span> <span class='id identifier rubyid_find_assets_from_text'>find_assets_from_text</span><span class='lparen'>(</span><span class='id identifier rubyid_barcodes_wells_text'>barcodes_wells_text</span><span class='rparen'>)</span>
      <span class='rbrace'>}</span>

    <span class='kw'>else</span> <span class='id identifier rubyid_raise'>raise</span> <span class='const'>StandardError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>No way to determine assets for input choice </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_input_methods'>input_methods</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="order_fields-instance_method">
  
    #<strong>order_fields</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


93
94
95
96
97
98</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/submission/submission_creator.rb', line 93</span>

<span class='kw'>def</span> <span class='id identifier rubyid_order_fields'>order_fields</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_order'>order</span><span class='period'>.</span><span class='id identifier rubyid_input_field_infos'>input_field_infos</span><span class='period'>.</span><span class='id identifier rubyid_flatten'>flatten</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_order'>order</span><span class='period'>.</span><span class='id identifier rubyid_request_type_ids_list'>request_type_ids_list</span> <span class='op'>=</span> <span class='id identifier rubyid_order'>order</span><span class='period'>.</span><span class='id identifier rubyid_request_types'>request_types</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_rt'>rt</span><span class='op'>|</span> <span class='lbracket'>[</span><span class='id identifier rubyid_rt'>rt</span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_order'>order</span><span class='period'>.</span><span class='id identifier rubyid_input_field_infos'>input_field_infos</span><span class='period'>.</span><span class='id identifier rubyid_reject'>reject</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_info'>info</span><span class='op'>|</span> <span class='id identifier rubyid_per_order_settings'>per_order_settings</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_info'>info</span><span class='period'>.</span><span class='id identifier rubyid_key'>key</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="order_params-instance_method">
  
    #<strong>order_params</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


87
88
89
90
91</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/submission/submission_creator.rb', line 87</span>

<span class='kw'>def</span> <span class='id identifier rubyid_order_params'>order_params</span>
  <span class='ivar'>@order_params</span> <span class='op'>=</span> <span class='ivar'>@order_params</span><span class='period'>.</span><span class='id identifier rubyid_to_hash'>to_hash</span> <span class='kw'>if</span> <span class='ivar'>@order_params</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span> <span class='op'>==</span> <span class='const'>HashWithIndifferentAccess</span>
  <span class='ivar'>@order_params</span><span class='lbracket'>[</span><span class='symbol'>:multiplier</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>HashWithIndifferentAccess</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='kw'>if</span> <span class='ivar'>@order_params</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@order_params</span><span class='lbracket'>[</span><span class='symbol'>:multiplier</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='ivar'>@order_params</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="orders-instance_method">
  
    #<strong>orders</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Return the submission&#39;s orders or a blank array</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


101
102
103
104</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/submission/submission_creator.rb', line 101</span>

<span class='kw'>def</span> <span class='id identifier rubyid_orders'>orders</span>
  <span class='kw'>return</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='id identifier rubyid_submission'>submission</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
  <span class='id identifier rubyid_submission'>submission</span><span class='period'>.</span><span class='id identifier rubyid_try'>try</span><span class='lparen'>(</span><span class='symbol'>:orders</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_o'>o</span><span class='op'>|</span> <span class='const'>OrderPresenter</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="per_order_settings-instance_method">
  
    #<strong>per_order_settings</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


47
48
49</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/submission/submission_creator.rb', line 47</span>

<span class='kw'>def</span> <span class='id identifier rubyid_per_order_settings'>per_order_settings</span>
  <span class='lbracket'>[</span><span class='symbol'>:pre_capture_plex_level</span><span class='comma'>,</span> <span class='symbol'>:gigabases_expected</span><span class='comma'>,</span> <span class='symbol'>:customer_accepts_responsibility</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="plate_purpose-instance_method">
  
    #<strong>plate_purpose</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


188
189
190</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/submission/submission_creator.rb', line 188</span>

<span class='kw'>def</span> <span class='id identifier rubyid_plate_purpose'>plate_purpose</span>
  <span class='ivar'>@plate_purpose</span> <span class='op'>||=</span> <span class='const'>PlatePurpose</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='id identifier rubyid_plate_purpose_id'>plate_purpose_id</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="product_lines-instance_method">
  
    #<strong>product_lines</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


272
273
274</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/submission/submission_creator.rb', line 272</span>

<span class='kw'>def</span> <span class='id identifier rubyid_product_lines'>product_lines</span>
  <span class='id identifier rubyid_templates'>templates</span><span class='period'>.</span><span class='id identifier rubyid_group_by'>group_by</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_t'>t</span><span class='op'>|</span> <span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_product_line'>product_line</span><span class='period'>.</span><span class='id identifier rubyid_try'>try</span><span class='lparen'>(</span><span class='symbol'>:name</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>General</span><span class='tstring_end'>&#39;</span></span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="project-instance_method">
  
    #<strong>project</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


106
107
108</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/submission/submission_creator.rb', line 106</span>

<span class='kw'>def</span> <span class='id identifier rubyid_project'>project</span>
  <span class='ivar'>@project</span> <span class='op'>||=</span> <span class='const'>Project</span><span class='period'>.</span><span class='id identifier rubyid_find_by_name'>find_by_name</span><span class='lparen'>(</span><span class='ivar'>@project_name</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="save-instance_method">
  
    #<strong>save</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Creates a new submission and adds an initial order on the submission using
the parameters</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/submission/submission_creator.rb', line 112</span>

<span class='kw'>def</span> <span class='id identifier rubyid_save'>save</span>
  <span class='kw'>begin</span>
    <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span><span class='period'>.</span><span class='id identifier rubyid_transaction'>transaction</span> <span class='kw'>do</span>
      <span class='comment'># Add assets to the order...
</span>      <span class='id identifier rubyid_new_order'>new_order</span> <span class='op'>=</span> <span class='id identifier rubyid_create_order'>create_order</span><span class='period'>.</span><span class='id identifier rubyid_tap'>tap</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_o'>o</span><span class='op'>|</span> <span class='id identifier rubyid_o'>o</span><span class='period'>.</span><span class='id identifier rubyid_update_attributes!'>update_attributes!</span><span class='lparen'>(</span><span class='id identifier rubyid_order_assets'>order_assets</span><span class='rparen'>)</span> <span class='rbrace'>}</span>

      <span class='kw'>if</span> <span class='id identifier rubyid_submission'>submission</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
        <span class='comment'># The submission should be destroyed if we delete the last order on it so
</span>        <span class='comment'># we shouldn&#39;t see any empty submissions.
</span>
        <span class='id identifier rubyid_submission'>submission</span><span class='period'>.</span><span class='id identifier rubyid_orders'>orders</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_new_order'>new_order</span>
      <span class='kw'>else</span>
        <span class='ivar'>@submission</span> <span class='op'>=</span> <span class='id identifier rubyid_new_order'>new_order</span><span class='period'>.</span><span class='id identifier rubyid_create_submission'>create_submission</span><span class='lparen'>(</span><span class='label'>user:</span> <span class='id identifier rubyid_order'>order</span><span class='period'>.</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='label'>priority:</span> <span class='id identifier rubyid_priority'>priority</span><span class='rparen'>)</span>
      <span class='kw'>end</span>

      <span class='id identifier rubyid_new_order'>new_order</span><span class='period'>.</span><span class='id identifier rubyid_save!'>save!</span>
      <span class='ivar'>@order</span> <span class='op'>=</span> <span class='id identifier rubyid_new_order'>new_order</span>
    <span class='kw'>end</span>

  <span class='kw'>rescue</span> <span class='const'>Submission</span><span class='op'>::</span><span class='const'>ProjectValidation</span><span class='op'>::</span><span class='const'>Error</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_project_exception'>project_exception</span>
    <span class='id identifier rubyid_order'>order</span><span class='period'>.</span><span class='id identifier rubyid_errors'>errors</span><span class='period'>.</span><span class='id identifier rubyid_add'>add</span><span class='lparen'>(</span><span class='symbol'>:base</span><span class='comma'>,</span> <span class='id identifier rubyid_project_exception'>project_exception</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span><span class='rparen'>)</span>
  <span class='kw'>rescue</span> <span class='const'>InvalidInputException</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_input_exception'>input_exception</span>
    <span class='id identifier rubyid_order'>order</span><span class='period'>.</span><span class='id identifier rubyid_errors'>errors</span><span class='period'>.</span><span class='id identifier rubyid_add'>add</span><span class='lparen'>(</span><span class='symbol'>:base</span><span class='comma'>,</span> <span class='id identifier rubyid_input_exception'>input_exception</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span><span class='rparen'>)</span>
  <span class='kw'>rescue</span> <span class='const'>IncorrectParamsException</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_exception'>exception</span>
    <span class='id identifier rubyid_order'>order</span><span class='period'>.</span><span class='id identifier rubyid_errors'>errors</span><span class='period'>.</span><span class='id identifier rubyid_add'>add</span><span class='lparen'>(</span><span class='symbol'>:base</span><span class='comma'>,</span> <span class='id identifier rubyid_exception'>exception</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span><span class='rparen'>)</span>
  <span class='kw'>rescue</span> <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>RecordInvalid</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_exception'>exception</span>
    <span class='id identifier rubyid_exception'>exception</span><span class='period'>.</span><span class='id identifier rubyid_record'>record</span><span class='period'>.</span><span class='id identifier rubyid_errors'>errors</span><span class='period'>.</span><span class='id identifier rubyid_full_messages'>full_messages</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_message'>message</span><span class='op'>|</span>
      <span class='id identifier rubyid_order'>order</span><span class='period'>.</span><span class='id identifier rubyid_errors'>errors</span><span class='period'>.</span><span class='id identifier rubyid_add'>add</span><span class='lparen'>(</span><span class='symbol'>:base</span><span class='comma'>,</span> <span class='id identifier rubyid_message'>message</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='comment'># Having got through that lot, return whether the save was successful or not
</span>  <span class='id identifier rubyid_order'>order</span><span class='period'>.</span><span class='id identifier rubyid_errors'>errors</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="studies-instance_method">
  
    #<strong>studies</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


251
252
253
254</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/submission/submission_creator.rb', line 251</span>

<span class='kw'>def</span> <span class='id identifier rubyid_studies'>studies</span>
  <span class='ivar'>@studies</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_study'>study</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_study'>study</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
  <span class='ivar'>@studies</span> <span class='op'>||=</span> <span class='ivar'>@user</span><span class='period'>.</span><span class='id identifier rubyid_interesting_studies'>interesting_studies</span><span class='period'>.</span><span class='id identifier rubyid_alphabetical'>alphabetical</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="study-instance_method">
  
    #<strong>study</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


247
248
249</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/submission/submission_creator.rb', line 247</span>

<span class='kw'>def</span> <span class='id identifier rubyid_study'>study</span>
  <span class='ivar'>@study</span> <span class='op'>||=</span> <span class='lparen'>(</span><span class='const'>Study</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='ivar'>@study_id</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='ivar'>@study_id</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="submission-instance_method">
  
    #<strong>submission</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


256
257
258
259</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/submission/submission_creator.rb', line 256</span>

<span class='kw'>def</span> <span class='id identifier rubyid_submission'>submission</span>
  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>unless</span> <span class='id identifier rubyid_id'>id</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>||</span> <span class='ivar'>@submission</span>
  <span class='ivar'>@submission</span> <span class='op'>||=</span> <span class='const'>Submission</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="template-instance_method">
  
    #<strong>template</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the SubmissionTemplate (OrderTemplate) to be used for this
Submission.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


262
263
264
265
266</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/submission/submission_creator.rb', line 262</span>

<span class='kw'>def</span> <span class='id identifier rubyid_template'>template</span>
  <span class='comment'># We can&#39;t get the template from a saved order, have to find by name.... :(
</span>  <span class='ivar'>@template</span> <span class='op'>=</span> <span class='const'>SubmissionTemplate</span><span class='period'>.</span><span class='id identifier rubyid_find_by_name'>find_by_name</span><span class='lparen'>(</span><span class='id identifier rubyid_order'>order</span><span class='period'>.</span><span class='id identifier rubyid_template_name'>template_name</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_try'>try</span><span class='lparen'>(</span><span class='symbol'>:submission</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_try'>try</span><span class='lparen'>(</span><span class='symbol'>:orders</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
  <span class='ivar'>@template</span> <span class='op'>||=</span> <span class='const'>SubmissionTemplate</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='ivar'>@template_id</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="template_id-instance_method">
  
    #<strong>template_id</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


276
277
278</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/submission/submission_creator.rb', line 276</span>

<span class='kw'>def</span> <span class='id identifier rubyid_template_id'>template_id</span>
  <span class='id identifier rubyid_submission'>submission</span><span class='period'>.</span><span class='id identifier rubyid_try'>try</span><span class='lparen'>(</span><span class='symbol'>:orders</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_try'>try</span><span class='lparen'>(</span><span class='symbol'>:first</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_try'>try</span><span class='lparen'>(</span><span class='symbol'>:id</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="template_name-instance_method">
  
    #<strong>template_name</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


290
291
292</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/submission/submission_creator.rb', line 290</span>

<span class='kw'>def</span> <span class='id identifier rubyid_template_name'>template_name</span>
  <span class='id identifier rubyid_submission'>submission</span><span class='period'>.</span><span class='id identifier rubyid_orders'>orders</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_template_name'>template_name</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="templates-instance_method">
  
    #<strong>templates</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


268
269
270</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/submission/submission_creator.rb', line 268</span>

<span class='kw'>def</span> <span class='id identifier rubyid_templates'>templates</span>
  <span class='ivar'>@templates</span> <span class='op'>||=</span> <span class='const'>SubmissionTemplate</span><span class='period'>.</span><span class='id identifier rubyid_visible'>visible</span><span class='period'>.</span><span class='id identifier rubyid_include_product_line'>include_product_line</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="url-instance_method">
  
    #<strong>url</strong>(view)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


286
287
288</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/submission/submission_creator.rb', line 286</span>

<span class='kw'>def</span> <span class='id identifier rubyid_url'>url</span><span class='lparen'>(</span><span class='id identifier rubyid_view'>view</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_view'>view</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='symbol'>:submission_path</span><span class='comma'>,</span> <span class='id identifier rubyid_submission'>submission</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>?</span> <span class='id identifier rubyid_submission'>submission</span> <span class='op'>:</span> <span class='lbrace'>{</span> <span class='label'>id:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>DUMMY_ID</span><span class='tstring_end'>&#39;</span></span> <span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="user_valid_projects-instance_method">
  
    #<strong>user_valid_projects</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns an array of all the names of active projects associated with the
current user.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


282
283
284</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/submission/submission_creator.rb', line 282</span>

<span class='kw'>def</span> <span class='id identifier rubyid_user_valid_projects'>user_valid_projects</span>
  <span class='ivar'>@user_active_projects</span> <span class='op'>||=</span> <span class='ivar'>@user</span><span class='period'>.</span><span class='id identifier rubyid_valid_projects'>valid_projects</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="wells_on_specified_plate_purpose_for-instance_method">
  
    #<strong>wells_on_specified_plate_purpose_for</strong>(plate_purpose, samples)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>This is a legacy of the old controller…</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


172
173
174
175
176
177
178</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/submission/submission_creator.rb', line 172</span>

<span class='kw'>def</span> <span class='id identifier rubyid_wells_on_specified_plate_purpose_for'>wells_on_specified_plate_purpose_for</span><span class='lparen'>(</span><span class='id identifier rubyid_plate_purpose'>plate_purpose</span><span class='comma'>,</span> <span class='id identifier rubyid_samples'>samples</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_samples'>samples</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_sample'>sample</span><span class='op'>|</span>
    <span class='comment'># Prioritise the newest well
</span>    <span class='id identifier rubyid_sample'>sample</span><span class='period'>.</span><span class='id identifier rubyid_wells'>wells</span><span class='period'>.</span><span class='id identifier rubyid_on_plate_purpose'>on_plate_purpose</span><span class='lparen'>(</span><span class='id identifier rubyid_plate_purpose'>plate_purpose</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_order'>order</span><span class='lparen'>(</span><span class='label'>id:</span> <span class='symbol'>:desc</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span> <span class='op'>||</span>
      <span class='id identifier rubyid_raise'>raise</span><span class='lparen'>(</span><span class='const'>InvalidInputException</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>No </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_plate_purpose'>plate_purpose</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'> plate found with sample: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sample'>sample</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Mon Dec 19 11:17:23 2016 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.5 (ruby-2.3.3).
</div>

    </div>
  </body>
</html>