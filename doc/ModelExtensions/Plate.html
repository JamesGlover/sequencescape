<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Module: ModelExtensions::Plate
  
    &mdash; Documentation by YARD 0.9.5
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "ModelExtensions::Plate";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (P)</a> &raquo;
    <span class='title'>ModelExtensions</span>
     &raquo; 
    <span class="title">Plate</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <iframe id="search_frame" src="../class_list.html"></iframe>

      <div id="content"><h1>Module: ModelExtensions::Plate
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  

  
  <dl>
    <dt>Included in:</dt>
    <dd><span class='object_link'><a href="../Plate.html" title="Plate (class)">Plate</a></span></dd>
  </dl>
  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>app/api/model_extensions/plate.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>This file is part of SEQUENCESCAPE; it is distributed under the terms of
GNU General Public License version 1 or later; Please refer to the LICENSE
and README files for information on licensing and authorship of this file.
Copyright (C) 2007-2011,2012,2013,2014,2015 Genome Research Ltd.</p>


  </div>
</div>
<div class="tags">
  

</div><h2>Defined Under Namespace</h2>
<p class="children">
  
    
      <strong class="modules">Modules:</strong> <span class='object_link'><a href="Plate/NamedScopeHelpers.html" title="ModelExtensions::Plate::NamedScopeHelpers (module)">NamedScopeHelpers</a></span>
    
  
    
  
</p>

  <h2>Constant Summary</h2>
  <dl class="constants">
    
      <dt id="PLATE_INCLUDES-constant" class="">PLATE_INCLUDES =
        
      </dt>
      <dd><pre class="code"><span class='lbracket'>[</span>
  <span class='symbol'>:plate_metadata</span><span class='comma'>,</span> <span class='lbrace'>{</span>
    <span class='label'>wells:</span> <span class='lbracket'>[</span>
      <span class='symbol'>:map</span><span class='comma'>,</span>
      <span class='symbol'>:transfer_requests_as_target</span><span class='comma'>,</span>
      <span class='symbol'>:uuid_object</span>
    <span class='rbracket'>]</span>
  <span class='rbrace'>}</span>
<span class='rbracket'>]</span></pre></dd>
    
  </dl>







  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#included-class_method" title="included (class method)">.<strong>included</strong>(base)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#library_source_plate-instance_method" title="#library_source_plate (instance method)">#<strong>library_source_plate</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#library_source_plates-instance_method" title="#library_source_plates (instance method)">#<strong>library_source_plates</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#plate_purpose_or_stock_plate-instance_method" title="#plate_purpose_or_stock_plate (instance method)">#<strong>plate_purpose_or_stock_plate</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pools-instance_method" title="#pools (instance method)">#<strong>pools</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns a hash from the submission for the pools to the wells that form
that pool on this plate.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pre_cap_groups-instance_method" title="#pre_cap_groups (instance method)">#<strong>pre_cap_groups</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Adds pre-capture pooling information, we need to delegate this to the stock
plate, as we need all the wells.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#source_plate-instance_method" title="#source_plate (instance method)">#<strong>source_plate</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#source_plates-instance_method" title="#source_plates (instance method)">#<strong>source_plates</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  



  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="included-class_method">
  
    .<strong>included</strong>(base)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


24
25
26
27
28
29
30</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/api/model_extensions/plate.rb', line 24</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_included'>included</span><span class='lparen'>(</span><span class='id identifier rubyid_base'>base</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_base'>base</span><span class='period'>.</span><span class='id identifier rubyid_class_eval'>class_eval</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_scope'>scope</span> <span class='symbol'>:include_plate_purpose</span><span class='comma'>,</span> <span class='tlambda'>-&gt;</span> <span class='tlambeg'>{</span> <span class='id identifier rubyid_includes'>includes</span><span class='lparen'>(</span><span class='symbol'>:plate_purpose</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
    <span class='id identifier rubyid_scope'>scope</span> <span class='symbol'>:include_plate_metadata</span><span class='comma'>,</span> <span class='tlambda'>-&gt;</span> <span class='tlambeg'>{</span> <span class='id identifier rubyid_includes'>includes</span><span class='lparen'>(</span><span class='symbol'>:plate_metadata</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
    <span class='id identifier rubyid_delegate'>delegate</span> <span class='symbol'>:pool_id_for_well</span><span class='comma'>,</span> <span class='label'>to:</span> <span class='symbol'>:plate_purpose</span><span class='comma'>,</span> <span class='label'>allow_nil:</span> <span class='kw'>true</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="library_source_plate-instance_method">
  
    #<strong>library_source_plate</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


44
45
46</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/api/model_extensions/plate.rb', line 44</span>

<span class='kw'>def</span> <span class='id identifier rubyid_library_source_plate'>library_source_plate</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_plate_purpose'>plate_purpose</span><span class='period'>.</span><span class='id identifier rubyid_library_source_plate'>library_source_plate</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="library_source_plates-instance_method">
  
    #<strong>library_source_plates</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


48
49
50</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/api/model_extensions/plate.rb', line 48</span>

<span class='kw'>def</span> <span class='id identifier rubyid_library_source_plates'>library_source_plates</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_plate_purpose'>plate_purpose</span><span class='period'>.</span><span class='id identifier rubyid_library_source_plate'>library_source_plate</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="plate_purpose_or_stock_plate-instance_method">
  
    #<strong>plate_purpose_or_stock_plate</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


32
33
34</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/api/model_extensions/plate.rb', line 32</span>

<span class='kw'>def</span> <span class='id identifier rubyid_plate_purpose_or_stock_plate'>plate_purpose_or_stock_plate</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_plate_purpose'>plate_purpose</span> <span class='op'>||</span> <span class='const'>PlatePurpose</span><span class='period'>.</span><span class='id identifier rubyid_find_by_name'>find_by_name</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Stock Plate</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="pools-instance_method">
  
    #<strong>pools</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a hash from the submission for the pools to the wells that form
that pool on this plate.  This is not necessarily efficient but it is
correct.  Unpooled wells, those without submissions, are completely ignored
within the returned result.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


55
56
57
58
59
60
61
62
63</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/api/model_extensions/plate.rb', line 55</span>

<span class='kw'>def</span> <span class='id identifier rubyid_pools'>pools</span>
  <span class='const'>ActiveSupport</span><span class='op'>::</span><span class='const'>OrderedHash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='period'>.</span><span class='id identifier rubyid_tap'>tap</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_pools'>pools</span><span class='op'>|</span>
    <span class='const'>Request</span><span class='period'>.</span><span class='id identifier rubyid_include_request_metadata'>include_request_metadata</span><span class='period'>.</span><span class='id identifier rubyid_for_pooling_of'>for_pooling_of</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_request'>request</span><span class='op'>|</span>
      <span class='id identifier rubyid_pools'>pools</span><span class='lbracket'>[</span><span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_pool_id'>pool_id</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='label'>wells:</span> <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_pool_into'>pool_into</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>,</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_tap'>tap</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_pool_information'>pool_information</span><span class='op'>|</span>
        <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_update_pool_information'>update_pool_information</span><span class='lparen'>(</span><span class='id identifier rubyid_pool_information'>pool_information</span><span class='rparen'>)</span>
      <span class='kw'>end</span> <span class='kw'>unless</span> <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_pool_id'>pool_id</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="pre_cap_groups-instance_method">
  
    #<strong>pre_cap_groups</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Adds pre-capture pooling information, we need to delegate this to the stock
plate, as we need all the wells</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


66
67
68
69
70
71
72
73
74
75
76</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/api/model_extensions/plate.rb', line 66</span>

<span class='kw'>def</span> <span class='id identifier rubyid_pre_cap_groups'>pre_cap_groups</span>
  <span class='const'>ActiveSupport</span><span class='op'>::</span><span class='const'>OrderedHash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='period'>.</span><span class='id identifier rubyid_tap'>tap</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_groups'>groups</span><span class='op'>|</span>
    <span class='const'>Request</span><span class='period'>.</span><span class='id identifier rubyid_include_request_metadata'>include_request_metadata</span><span class='period'>.</span><span class='id identifier rubyid_for_pre_cap_grouping_of'>for_pre_cap_grouping_of</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_request'>request</span><span class='op'>|</span>
      <span class='id identifier rubyid_groups'>groups</span><span class='lbracket'>[</span><span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_group_id'>group_id</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='label'>wells:</span> <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_group_into'>group_into</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>,</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_tap'>tap</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_pool_information'>pool_information</span><span class='op'>|</span>
        <span class='id identifier rubyid_pool_information'>pool_information</span><span class='lbracket'>[</span><span class='symbol'>:pre_capture_plex_level</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_request_metadata'>request_metadata</span><span class='period'>.</span><span class='id identifier rubyid_pre_capture_plex_level'>pre_capture_plex_level</span>
        <span class='comment'># We supply the submission id to assist with correctly tagging transfer requests later
</span>        <span class='id identifier rubyid_pool_information'>pool_information</span><span class='lbracket'>[</span><span class='symbol'>:submission_id</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_submission_id'>submission_id</span>
      <span class='kw'>end</span> <span class='kw'>unless</span> <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_group_id'>group_id</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="source_plate-instance_method">
  
    #<strong>source_plate</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


36
37
38</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/api/model_extensions/plate.rb', line 36</span>

<span class='kw'>def</span> <span class='id identifier rubyid_source_plate'>source_plate</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_plate_purpose'>plate_purpose</span><span class='period'>.</span><span class='id identifier rubyid_source_plate'>source_plate</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="source_plates-instance_method">
  
    #<strong>source_plates</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


40
41
42</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/api/model_extensions/plate.rb', line 40</span>

<span class='kw'>def</span> <span class='id identifier rubyid_source_plates'>source_plates</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_plate_purpose'>plate_purpose</span><span class='period'>.</span><span class='id identifier rubyid_source_plates'>source_plates</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Mon Dec 19 11:16:27 2016 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.5 (ruby-2.3.3).
</div>

    </div>
  </body>
</html>